<html><head><title>zziplib - zip access </title>
 <meta name="formatter" content="mksite.pl" />
 <meta name="src-dir" content="." />
 <meta name="DC.date.issued" content="1. June 2000" />
 <meta name="DC.title" content="ZIP Access" />
 <meta name="DC.relation.isFormatOf" content="zzip-zip.htm" />
 <meta name="DC.date.modified" content="2014-12-25" />
 <meta name="DC.date" content="1. June 2000" />
 <meta name="DC.relation.section" content="zzip-index.html" />
 <meta name="DC.title.selected" content="ZIP Access" />
 <meta name="DC.publisher" content="mo" />
 <style type="text/css"><!--
  /* sdocbook.css */
  
  .date
  {
    display: inline;
  }
 --></style>

  <style>
   a:link          { text-decoration : none ; color : #000080 ; }
   a:visited       { text-decoration : none ; color : #200060 ; }
   .justify        { text-align : justify ; }
   .navlist        { background-color : #F0F0F0 ; 
                     width : 9em ; speak : none ; }
   .navprint       { pause-after : 200ms ; speak : spell-out ; }
   body            { background-color : white ; }
   .P              { text-align : justify ; margin-right: 1em ;
                                            margin-left: 1em ; }
   .BLOCKQUOTE     { text-align : justify ; margin-right: 3em ;
                                            margin-left: 3em ; }
   .PRE            {                       margin-right: 2em ;
                                            margin-left: 2em ; }
   .DT             { font-weight : bold ; }
   .DD             { text-align : justify ; margin-right: 1em ; }
  </style>
</head><body>
<!--mksite:sectioninfo--> <!--mksite:nosimplevars-->
<table width="100%"><tr valign="top"><td class="navlist">
<center><sub>
  <!--mksite:printerfriendly--> 
  <a href="zzip-zip.print.html" title="printer friendly version">
  <img alt="printer / text mode version" width="8" height="8" border="0" /></a>
  </sub> &nbsp;
     <big><big><big><b>
     <font color="#800080"><sup>Z</sup>ZIP<sub>lib</sub></font>
     </b></big></big></big>
<br><big><b> 0.13.62 </b></big>
</center>
<hr><a href="zzip-index.html">Library</a>
<br>-<b><a href="zzip-zip.html"> ZIP Access</a></b>
<br>-<a href="zzip-file.html"> Transparently</a>
<br>-<a href="zzip-sdl-rwops.html"> SDLrwops <small>Example</small></a>
<br>-<a href="zzip-extio.html"> ext/io <small>Customization</small></a>
<br>&nbsp;<a href="zzip-xor.html"> xor/io <small>Obfuscation</small></a>
<br>&nbsp;<a href="zzip-crypt.html"> zip/no <small>Encryption</small></a>
<small><a href="zzip-cryptoid.html">(2)</a></small>
<br>-<a href="zzip-api.html"> Library API</a>
<br>&nbsp;<a href="zzip-basics.html"> basics</a></u>
&nbsp;<a href="zzip-extras.html"> extras</a></u>
<br>=<a href="zzip-parse.html">Parsing ZIPs</a>
<br>-<a href="64on32.html"> 64on32 extras</a>
<br>-<a href="future.html"> Next To Come</a> <br> &nbsp;
<small><a href="fseeko.html"> fseeko </a></small>
<small><a href="mmapped.html"> mmapped </a></small>
<small><a href="memdisk.html"> memdisk </a></small>
<br>-<a href="configs.html"> Config Helpers</a>
<br>-<a href="sfx-make.html"> Making a zip/exe</a>
<br>=<a href="history.html">Hints And Links</a>
<br>-<a href="referentials.html"> Referentials</a>
<br>-<a href="functions.html"> Functions List..</a>
<br> &nbsp; -<a href="zziplib.html"> zziplib.*</a>
<br> &nbsp; -<a href="zzipmmapped.html"> zzipmmapped.*</a>
<br> &nbsp; -<a href="zzipfseeko.html"> zzipfseeko.*</a>
<!--START-->
<br> &nbsp; -<a href="man/index.html"><small> unix man pages</small></a>
<!--ENDS-->

<br>&nbsp
<br>&nbsp;
<br><small><a href="faq.html"> faq </a></small>
<small>&nbsp;<a href="notes.html"> notes </a></small>
<small>&nbsp;<a href="zip-php.html"> zip-php </a></small>
<hr><a href="download.html"> Download Area </a>
<br>&nbsp;<a href="developer.html"> Developer Area </a>
<br>&nbsp;<a href="http://sourceforge.net/projects/zziplib"> Sourceforge Project</a>
<br>&nbsp;<a href="http://zziplib.sourceforge.net"> zziplib.sf.net 
                                  <small><i>Home</i></small></a>

<br>&nbsp;<a href="changes.html"> ChangeLog</a>
<br><small><a href="copying.html"> LGPL/MPL license</a></small>
<br>&nbsp;
<hr>
<center><!--START-->
     <a href="http://sourceforge.net/project/?group_id=6389">
        <img src="http://sourceforge.net/sflogo.php?group_id=6389&type=2"
            border="0" alt="sourceforge.net" width="125" height="37">
     </a>
<br><small><a href="site.html">-sitemap-</a></small>
</center><!--ENDS-->

<p align="right"><small>
generated 2014-12-26
</small>
<br> <small>(C)</small> Guido Draheim
<br><i> guidod<small>@</small>gmx.de</i>
</p>
<!--mksite:emailfooter:guidod@gmx.de?subject=zzip:-->

<p align="right"><small><small>
   formatted by <a href="http://zziplib.sf.net/mksite">mksite.sh</a>
</p>

<p><b>as xml:</b></p>
<hr><a href="zzip-index.xml">Library</a>
<br>-<a href="64on32.xml"> 64on32 extras</a>
<br>-<a href="future.xml"> Next To Come</a> <br> &nbsp;
</td><td> 


<table width="100%"><tr valign="bottom"><td><h2> ZIP Access &</td><td align="right"><i>    Accessing Zip Archives with ZLib Decompression</i></td></tr></table>

<!--border--> 


<h3> The Library </h3>

<p class="P">
 The <a href="zziplib.html">zziplib library</a> offers users the
 ability to easily extract data from files archived in a single
 zip file. This way, programs that use many "read-only" files from
 a program specific source directory can have a single zip
 archive
</p>
<p class="P">
 This library offers only a (free) subset of compression methods
 provided in a full implementation but that is well enough. The
 idea here is that <tt>zip/unzip</tt> utilities can be used
 to create archives that will later be read by using this library.
 Yet those programmes (or a library with their functionality)
 is not needed in that final operation.
</p>


<h3> Using A Zip-File </h3>

<p class="P">
 Before a file in the zip-archive is accessed, the application
 must first get a handle to the central directory contained in the
 zip-file. This is achived by calling 
 <a href="zziplib.html#zzip_dir_open"> zzip_dir_open </a>
 or 
 <a href="zziplib.html#zzip_dir_fdopen"> zzip_dir_fdopen </a>.
 The directory entries in the zip-archives can be obtained
 with
 <a href="zziplib.html#zzip_dir_read"> zzip_dir_read </a>.
 After being done, the zip-dir handle should be closed with
 <a href="zziplib.html#zzip_dir_close"> zzip_dir_close </a>.
</p>
<p><pre> ZZIP_DIR* dir = zzip_dir_open("test.zip",0);
 if (dir) {
   ZZIP_DIRENT dirent;
   if (zzip_dir_read(dir,&amp;dirent) {
     /* show info for first file */
     print("%s %i/%i", dirent.d_name, dirent.d_csize, dirent.st_size);
   }
   zzip_dir_close(dir);
 }
</pre></p>
<p class="P">
 From the zip-dir handle a compressed file can be opened
 for reading. This is achieved by using 
 <a href="zziplib.html#zzip_file_open"> zzip_file_open </a>
 and providing it with the dir-handle and a name of the file.
 The function
 <a href="zziplib.html#zzip_file_read"> zzip_file_read </a>
 is used to get pieces of uncompressed data from the file, and
 the file-handle should be closed with
 <a href="zziplib.html#zzip_file_close"> zzip_file_close </a>
</p>
<p><pre> ZZIP_FILE* fp = zzip_file_open(dir,"README",0);
 if (fp) {
   char buf[10];
   zzip_ssize_t len = zzip_file_read(fp, buf, 10);
   if (len) {
     /* show head of README */
     write(1, buf, len); 
   }
   zzip_file_close(fp);
 } 
</pre></p>


<h3> Magic Zipped Files </h3>

<p class="P">
 There is actually no need to directly use the zip-centric functions
 as described above. Instead there are magic replacements for the
 posix calls <code>open/read/close</code> and 
 <code>opendir/readdir/closedir</code>. The prototypes of these
 functions had been the guideline for the design of their magic
 counterparts of the
 <a href="zziplib.html">zziplib library</a>.
</p>
<p class="P">
 The magic functions are described in a seperated document on
 <a href="zzip-file.html"> Using Zipped Files </a>. In general,
 the functions have a prefix <tt>zzip_</tt> and their argument
 types have a prefix <tt>ZZIP_</tt> where appropriate. Calls
 to the magic functions and the direct functions above can
 be mixed as long as the magic functions have not been opening
 a real file.
</p>
<p class="P">
 To detect a real file (or directory), the info functions
 <a href="zziplib.html#zzip_file_real"> zzip_file_real </a>
 and
 <a href="zziplib.html#zzip_dir_real"> zzip_dir_real </a>
 can be used.
 If these return a true value, the standard posix functions
 are more apropriate. The posix handles can be obtained with
 a call to
 <a href="zziplib.html#zzip_realdir"> zzip_realdir </a> and
 <a href="zziplib.html#zzip_realfd"> zzip_realfd </a> respectivly.
</p>


<h3> Errors &amp; Infos </h3>

<p class="P">
 There are a set of error and info functions available. To handle
 error conditions specific to the
 <a href="zziplib.html">zziplib library</a>
 there are these functions:
 <a href="zziplib.html#zzip_error"> zzip_error </a>,
 <a href="zziplib.html#zzip_seterror"> zzip_seterror </a>
 and their string representations with
 <a href="zziplib.html#zzip_strerror"> zzip_strerror </a>,
 <a href="zziplib.html#zzip_strerror_of"> zzip_strerror_of </a>.
 The magic functions will map any of these specific library
 error conditions to the more generic system <code>errno</code>
 codes with
 <a href="zziplib.html#zzip_errno"> zzip_errno </a>.
</p>
<p class="P">
 More information on stream can be obtained with
 <a href="zziplib.html#zzip_dir_stat"> zzip_dir_stat </a> and
 <a href="zziplib.html#zzip_dirhandle"> zzip_dirhandle. </a>
 The latter is used to obtain the dir-handle that every zipped file 
 handle has even if not explicitly opened.
</p>
<p class="P">
 The usage of many functions are shown in the example programs
 that come along with the
 <a href="zziplib.html">zziplib library</a>. See the files
 <a href="zzcat.c"> zzcat.c </a> and
 <a href="zzdir.c"> zzdir.c </a>. The 
 <a href="zziptest.c"> zziptest.c </a> program needs the
 private header file 
 <a href="zzip.h"> zzip.h </a> whereas the library installer
 will only copy the public include file 
 <a href="zziplib.h"> zziplib.h </a> to your system's
 <tt>include</tt> directory.
</p>

<hr><table border="0" width="100%"><tr><td>
<a href="mailto:guidod@gmx.de?subject=zzip:">guidod@gmx.de</a>
</td><td align="right">
1. June 2000</td></tr></table>
</td></tr></table></body></html>
